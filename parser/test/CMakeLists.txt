# Copy example directory over for testing
execute_process(COMMAND ${CMAKE_COMMAND} -E copy_directory ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_BINARY_DIR})

###################
### Test Errors ###
###################

gmad_test_fail(no-input-file,    "")
gmad_test_fail(two-input-files,  "a;b")
gmad_test_fail(nonexistent       nonexistent.gmad)
gmad_test_fail(reserved-var      reservedvariable.gmad)
gmad_test_fail(reserved-function reservedfunction.gmad)
gmad_test_pass_expression(define-reserved-name            definereservedname.gmad           "already defined")
gmad_test_pass_expression(define-reserved-variable        definereservedvariable.gmad       "already defined")
gmad_test_pass_expression(define-reserved-string-variable definereservedstringvariable.gmad "already defined")
gmad_test_pass_expression(define-reserved-function        definereservedfunction.gmad       "already defined")
gmad_test_fail(no-semicolon  nosemicolon.gmad)
gmad_test_fail(stringnumber  stringnumber.gmad)
gmad_test_fail(stringcomma   stringcomma.gmad)
gmad_test_fail(stringnewline stringnewline.gmad)
gmad_test_fail(undefined-element undefinedelement.gmad)
gmad_test_fail(undefined-option  undefinedoption.gmad)
gmad_test_pass_expression(undefined-element-and-option undefinedElementAndOption.gmad "not been defined")
gmad_test_fail(duplicate-name duplicateName.gmad)
gmad_test_duplicate(aperture)
gmad_test_duplicate(atom)
gmad_test_duplicate(blm)
gmad_test_duplicate(cavitymodel)
gmad_test_duplicate(colour)
gmad_test_duplicate(field)
gmad_test_duplicate(material)
gmad_test_duplicate(modulator)
gmad_test_duplicate(xsecbias)
gmad_test_duplicate(query)
gmad_test_duplicate(region)
gmad_test_duplicate(scorer)
gmad_test_duplicate(scorermesh)
gmad_test_duplicate(samplerplacement)
gmad_test_duplicate(tunnel)


gmad_test_fail(element-no-args      elementnoargs.gmad)
gmad_test_fail(overwrite-element    overwriteElement.gmad)
gmad_test_pass_expression(overwrite-variable           overwriteVariable.gmad        "WARNING")
gmad_test_pass_expression(overwrite-variable-string    overwriteVariableString.gmad  "WARNING")
gmad_test_pass_expression(undeclared-variable          undeclaredVariable.gmad       "is not declared")
gmad_test_fail(include-nonexistent  includenonexistent.gmad)
gmad_test_fail(recursive-inclusion  recursiveinclusion.gmad)
gmad_test_fail(option-as-variable optionAsVariable.gmad)

##########################
### Test Functionality ###
##########################

gmad_test_pass(stop           stop.gmad)
gmad_test_pass(string         string.gmad)
gmad_test_pass(arraystring    arraystring.gmad)
gmad_test_pass(print          print.gmad)
gmad_test_pass(units          units.gmad)
gmad_test_pass_expression(array              array.gmad           "32")
gmad_test_pass_expression(test-functions     testfunctions.gmad   "3.14159265")
gmad_test_pass_expression(if                 if.gmad              "2")
gmad_test_pass_expression(ifelse             ifelse.gmad          "2")
gmad_test_pass_expression(access-attribute   accessattribute.gmad "0.1")
gmad_test_pass_expression(access-element     accesselement.gmad   "plane")
gmad_test_pass_expression(access-option      accessoption.gmad    "123")
gmad_test_pass_expression(inherit      inherit.gmad     "0.05")
gmad_test_pass_expression(extend       extend.gmad      "0.05")
gmad_test_pass_expression(extend-list  extendlist.gmad  "1234")
gmad_test_fail(missing-access-attribute      accessMissingAttribute.gmad)
gmad_test_fail(access-element-outside-range  accesselementoutsiderange.gmad)
gmad_test_fail(extend-invalid                extendnonvalid.gmad)

# SAMPLERS
gmad_test_fail(add-sampler-undefined-element addsampler_undefined_element.gmad)
gmad_test_pass_expression(add-sampler               addsampler.gmad              "plane")
gmad_test_pass_expression(add-sampler-all           addsampler_all.gmad          "plane")
gmad_test_pass_expression(add-sampler-element-type  addsampler_element_type.gmad "plane")
gmad_test_pass_expression(add-sampler-partID-filter-multiple addsampler_multiple_partID_filter.gmad "samplerarticleSetID = 1")
gmad_test_pass_expression(add-sampler-partID-filter          addsampler_partID_filter.gmad          "samplerarticleSetID = 0")
gmad_test_pass_expression(add-sampler-partID-filter-all      addsampler_all_partID_filter.gmad      "samplerarticleSetID = 0")


# test objects - alphabetical
gmad_test_pass(aperture                   aperture.gmad)
gmad_test_pass(atom                       atom.gmad)
gmad_test_pass(beam   beam.gmad)
gmad_test_pass(blm                        blm.gmad)
gmad_test_pass(cavitymodel                cavitymodel.gmad)
gmad_test_pass(colour                     colour.gmad)
gmad_test_pass(crystal                    crystal.gmad)
gmad_test_pass(field                      field.gmad)
gmad_test_pass(laser                      laser.gmad)
gmad_test_pass(material                   material.gmad)
gmad_test_pass(modulator                  modulator.gmad)
gmad_test_pass(physics-biasing            physicsbiasing.gmad)
gmad_test_pass(placement                  placement.gmad)
gmad_test_pass(placement-sequence         placement_sequence.gmad)
gmad_test_pass(query                      query.gmad)
gmad_test_pass(region                     region.gmad)
gmad_test_pass(samplerplacement           samplerplacement.gmad)
gmad_test_pass(scorer                     scorer.gmad)
gmad_test_pass(scorermesh                 scorermesh.gmad)
gmad_test_pass(tunnel                     tunnel.gmad)

# test object extensions - alphabetical
gmad_test_pass(extend-aperture          extendaperture.gmad)
gmad_test_pass(extend-atom              extendatom.gmad)
gmad_test_pass(extend-blm               extendblm.gmad)
gmad_test_pass(extend-cavitymodel       extendcavitymodel.gmad)
gmad_test_pass(extend-colour            extendcolour.gmad)
gmad_test_pass(extend-crystal           extendcrystal.gmad)
gmad_test_pass(extend-field             extendfield.gmad)
gmad_test_pass(extend-laser             extendlaser.gmad)
gmad_test_pass(extend-material          extendmaterial.gmad)
gmad_test_pass(extend-modulator         extendmodulator.gmad)
gmad_test_pass(extend-physics-biasing   extendphysicsbiasing.gmad)
gmad_test_pass(extend-placement         extendplacement.gmad)
gmad_test_pass(extend-query             extendquery.gmad)
gmad_test_pass(extend-region            extendregion.gmad)
gmad_test_pass(extend-samplerplacement  extendsamplerplacement.gmad)
gmad_test_pass(extend-scorer            extendscorer.gmad)
gmad_test_pass(extend-scorermesh        extendscorermesh.gmad)
gmad_test_pass(extend-tunnel            extendtunnel.gmad)




