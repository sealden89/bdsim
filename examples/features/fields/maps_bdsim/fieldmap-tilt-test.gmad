! visualise fields with /vis/scene/add/magneticField 10 in the visualiser

! field consists of box (4 points transversely) with a field vector
! at 45 degrees pointing top left while looking along direction of beam
! which is (+ve x, +ve y, 0)
! the field is tilted backwards by pi/8 and the element forward and they
! should cancel with field lines showing at the original 45 degrees (pi/4)

! field was generated by Generate2DBox.py
f1: field, type="bmap2d",
    	   magneticFile="bdsim2d:2dboxexample2.dat",
	   magneticInterpolator="linear2d",
	   bScaling=0.5,
	   integrator="g4classicalrk4",
	   axisAngle=1,
	   axisZ=1,
	   angle=-pi/8;

! few tests - can also paste onto a drift and behaviour should be the same
!box: element, fieldAll="f1", l=1.1*m, geometry="gdml:abox.gdml";
box: element, fieldAll="f1", l=1.1*m, geometry="gdml:abox.gdml", tilt=pi/8;
!box: drift, l=1.1*m, apertureType="rectangular", aper1=10*cm, aper2=5*cm, fieldAll="f1", tilt=pi/4;
l1: line=(box);
use, l1;

beam, particle="e-",
      energy=3*GeV,
      X0=1*cm,
      Y0=2*cm;

option, ngenerate=1;